{"version":3,"file":"_Tool.js","sourceRoot":"","sources":["../../../../base/services/_Tool.ts"],"names":[],"mappings":"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","sourcesContent":["import _Btn from \"./_Btn\";\r\nimport _ITextarea from \"./_ITextarea\";\r\nimport _Modal from \"./_Modal\";\r\nimport _Obj from \"./_Obj\";\r\n\r\n//small public components\r\nexport default class _Tool {\r\n\r\n    // Static properties for jQuery elements\r\n    private static _msg: JQueryN = null; //使用id\r\n    private static _ans: JQueryN = null; //使用id\r\n    private static _alert: JQueryN = null;\r\n    private static _area: JQueryN = null;\r\n    private static _image: JQueryN = null;\r\n    static work: JQueryN = null;\r\n\r\n    // Static properties for callback functions\r\n    private static _fnOnMsgClose: FnN = null;\r\n    private static _fnOnAnsYes: FnN = null;\r\n    private static _fnOnAnsNo: FnN = null;\r\n    private static _fnOnAreaYes: FnN = null;\r\n\r\n    static init(): void {\r\n        //alert\r\n        _Tool._msg = $('#xgMsg');  //使用id\r\n        _Tool._ans = $('#xgAns');  //使用id\r\n        _Tool._alert = $('.x-alert');\r\n        _Tool._area = $('.x-area');\r\n        _Tool._image = $('.x-image');\r\n        _Tool.work = $('.x-work');\r\n    }\r\n\r\n    /**\r\n     * show message box\r\n     * param msg {string} html or string\r\n     * param fnClose {function} callback function\r\n     */\r\n    static msg(msg: string, fnClose?: Function): void {\r\n        const box = _Tool._msg;\r\n        if (!box) return;\r\n\r\n        box.find('.xd-msg').html(msg);\r\n        _Modal.showO(box);\r\n\r\n        //set callback\r\n        _Tool._fnOnMsgClose = fnClose || null;\r\n    }\r\n\r\n    /**\r\n     * show confirmation \r\n     * @param msg {string}\r\n     * @param fnYes {function}\r\n     * @param fnNo {function}\r\n     */\r\n    static ans(msg: string, fnYes: Function, fnNo?: Function): void {\r\n        const box = _Tool._ans;\r\n        if (!box) return;\r\n\r\n        box.find('.xd-msg').html(msg);\r\n        _Modal.showO(box);\r\n\r\n        //set callback\r\n        _Tool._fnOnAnsYes = fnYes;\r\n        _Tool._fnOnAnsNo = (fnNo === undefined) ? null : fnNo;\r\n    }\r\n\r\n    /**\r\n     * show alert(auto close), use bootstrap alert\r\n     * param {string} msg\r\n     * param {string} color: default blue, R(red)\r\n     */\r\n    static alert(msg: string, color?: string): void {\r\n        const box = _Tool._alert;\r\n        if (!box) return;\r\n\r\n        box.find('.xd-msg').text(msg)\r\n        box.fadeIn(500, function () {\r\n            _Obj.show(box);\r\n            setTimeout(function () {\r\n                _Tool.onAlertClose();\r\n            }, 5000);   //show 5 seconds\r\n        });\r\n    }\r\n\r\n    //??show waiting\r\n    static showWait(): void {\r\n        //$('body').addClass('x-show-loading');\r\n        _Obj.show($('.x-wait'));\r\n    }\r\n    //??\r\n    static hideWait(): void {\r\n        //$('body').removeClass('x-show-loading');\r\n        _Obj.hide($('.x-wait'));\r\n    }\r\n\r\n    /**\r\n     * show textarea editor\r\n     * param title {string} modal title\r\n     * param value {string} textarea value\r\n     * param isEdit {boolean} true:edit, false:readonly\r\n     * param fnOk {function} function of onOk\r\n     */\r\n    static showArea(title: string, value: string, isEdit: boolean, fnOk: Function): void {\r\n        //set title\r\n        const box = _Tool._area;\r\n        if (!box) return;\r\n\r\n        box.find('.modal-title').text(title);\r\n\r\n        //get value & yes button status\r\n        const obj = box.find('textarea');\r\n        obj.val(value);\r\n        _ITextarea.setEditO(obj, isEdit);\r\n        _Btn.setEditO(box.find('.xd-yes'), isEdit);\r\n\r\n        //set callback function\r\n        if (isEdit)\r\n            _Tool._fnOnAreaYes = fnOk;\r\n\r\n        //show modal\r\n        _Modal.showO(box);\r\n    }\r\n\r\n    static onAreaYes(): void {\r\n        const box = _Tool._area;\r\n        if (!box) return;\r\n\r\n        if (_Tool._fnOnAreaYes) {\r\n            _Modal.hideO(box);\r\n            // .val() 的返回值可能是 string | number | string[]\r\n            const value = box.find('textarea').val();\r\n            _Tool._fnOnAreaYes(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * show image modal\r\n     * param fileName {string} image file name without path\r\n     * param imageSrc {string} image src\r\n     */ \r\n    static showImage(fileName: string, imageSrc: string): void {\r\n        const box = _Tool._image;\r\n        if (!box) return;\r\n\r\n        box.find('img').attr('src', imageSrc);\r\n        box.find('label').text(fileName);\r\n        _Modal.showO(box);\r\n    }\r\n\r\n    /**\r\n     * onclick alert close button\r\n     */\r\n    static onAlertClose(): void {\r\n        const box = _Tool._alert;\r\n        if (!box) return;\r\n\r\n        box.fadeOut(500, function () {\r\n            _Obj.hide(box);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * triggered when user click confirmation yes button\r\n     * called by XgAnsHelper\r\n     */\r\n    static onAnsYes(): void {\r\n        if (_Tool._fnOnAnsYes && _Tool._ans) {\r\n            _Modal.hideO(_Tool._ans);\r\n            _Tool._fnOnAnsYes();\r\n        }\r\n    }\r\n    \r\n    static onAnsNo(): void {\r\n        if (_Tool._fnOnAnsNo)\r\n            _Tool._fnOnAnsNo();\r\n        if (_Tool._ans) {\r\n            _Modal.hideO(_Tool._ans);\r\n        }\r\n    }\r\n    \r\n    static onMsgClose(): void {\r\n        if (_Tool._fnOnMsgClose)\r\n            _Tool._fnOnMsgClose();\r\n        if (_Tool._msg) {\r\n            _Modal.hideO(_Tool._msg);\r\n        }\r\n    }\r\n\r\n} //class"]}