<form id='eform' class='xg-form'>
	@await Component.InvokeAsync("XiRead", new XiReadDto { Title = "資料Id", Fid = "Id" })
	<div class="row">
		@await Component.InvokeAsync("XiSelect", new XiSelectDto { Title = "專案", Fid = "ProjectId", Required = true, Rows = ViewBag.Projects, InputAttr = "onchange=_me.onChgProject(true)", InRow = true })
	</div>
	<div class="row">
		@await Component.InvokeAsync("XiSelect", new XiSelectDto { Title = "專案功能", Fid = "ProgId", Required = true, InRow = true })
		@await Component.InvokeAsync("XiDate", new XiDateDto { Title = "工作日期", Fid = "WorkDate", Required = true, InRow = true })
	</div>
	<div class="row">
		@await Component.InvokeAsync("XiSelect", new XiSelectDto { Title = "資料種類", Required = true, Fid = "IssueType", Rows = ViewBag.IssueTypes, InRow = true })
		@await Component.InvokeAsync("XiInt", new XiIntDto { Title = "工作時數", Fid = "WorkHours", Required = true, InRow = true, Cols = "2,1" })
	</div>

	@await Component.InvokeAsync("XiText", new XiTextDto { Title = "標題", Fid = "Title", Required = true, MaxLen = 255, Cols = "2,6" })
	@await Component.InvokeAsync("XiTextarea", new XiTextareaDto { Title = "內容說明", Fid = "Note", RowsCount = 8, MaxLen = 1000, Cols = "2,6" })

	<div class="row">
		@await Component.InvokeAsync("XiRead", new XiReadDto { Title = "建檔人員", Fid = "CreatorName", InRow = true })
		@await Component.InvokeAsync("XiRead", new XiReadDto { Title = "修改人員", Fid = "ReviserName", InRow = true })
	</div>
	<div class="row">
		@await Component.InvokeAsync("XiRead", new XiReadDto { Title = "建檔日期", Fid = "Created", Format = BrFormatEstr.Dt, InRow = true })
		@await Component.InvokeAsync("XiRead", new XiReadDto { Title = "修改日期", Fid = "Revised", Format = BrFormatEstr.Dt, InRow = true })
	</div>

</form>

<div class='xg-btns-box'>
    <span class="xg-span-label">上傳檔案</span>
	@await Component.InvokeAsync("XgAddRow", "_me.mIssueFile.onAddRow()")
</div>
<form id='eformIssueFile' class='xg-form' style="border:none">
    <table class="table xg-table xg-no-hline" cellspacing="0">
        <thead>
            <tr>
				<th>檔案名稱</th>
				<th>上傳日期</th>
				<th></th>
            </tr>
        </thead>
		<tbody id="tbodyIssueFile"></tbody>
    </table>
</form>

<div class='xg-btns-box'>
	<span class="xg-span-label">相關問題</span>
	@await Component.InvokeAsync("XgAddRow", "_me.mIssueRelat.onAddRow()")
</div>
<form id='eformIssueRelat' class='xg-form' style="border:none">
	<table class="table xg-table xg-no-hline" cellspacing="0">
		<thead>
			<tr>
				<th>來源問題Id</th>
				<th>標題</th>
				<th>建檔日期</th>
				<th></th>
			</tr>
		</thead>
		<tbody id="tbodyIssueRelat"></tbody>
	</table>
</form>

<vc:xg-save-back/>

<script id="tplIssueFile" type="text/template">
	<tr>
		@await Component.InvokeAsync("XiHide", new XiHideDto { Fid = "Id" })
		<td>@await Component.InvokeAsync("XiFile", new XiFileDto { Fid = "FileName" })</td>
		<td>@await Component.InvokeAsync("XiRead", new XiReadDto { Fid = "Created" })</td>
		<td width='60px' class='text-center'>@await Component.InvokeAsync("XgDeleteRow", "_me.mIssueFile.onDeleteRow(this)")</td>
	</tr>
</script>
<script id="tplIssueRelat" type="text/template">
	<tr>
	@await Component.InvokeAsync("XiHide", new XiHideDto { Fid = "Id" })
		<td>@await Component.InvokeAsync("XiText", new XiTextDto { Fid = "IssueId", Required = true })</td>
		<td>@await Component.InvokeAsync("XiRead", new XiReadDto { Fid = "Title" })</td>
		<td>@await Component.InvokeAsync("XiRead", new XiReadDto { Fid = "Created" })</td>
		<td width='60px' class='text-center'>@await Component.InvokeAsync("XgDeleteRow", "_me.mIssueRelat.onDeleteRow(this)")</td>
	</tr>
</script>

